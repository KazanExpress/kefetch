{"version":3,"file":"kefetchup.umd.js","sources":["../node_modules/url-polyfill/url-polyfill.js","../src/client.ts","../src/kefetchup.ts"],"sourcesContent":["(function(global) {\r\n  /**\r\n   * Polyfill URLSearchParams\r\n   *\r\n   * Inspired from : https://github.com/WebReflection/url-search-params/blob/master/src/url-search-params.js\r\n   */\r\n\r\n  var checkIfIteratorIsSupported = function() {\r\n    try {\r\n      return !!Symbol.iterator;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n\r\n  var iteratorSupported = checkIfIteratorIsSupported();\r\n\r\n  var createIterator = function(items) {\r\n    var iterator = {\r\n      next: function() {\r\n        var value = items.shift();\r\n        return { done: value === void 0, value: value };\r\n      }\r\n    };\r\n\r\n    if (iteratorSupported) {\r\n      iterator[Symbol.iterator] = function() {\r\n        return iterator;\r\n      };\r\n    }\r\n\r\n    return iterator;\r\n  };\r\n\r\n  /**\r\n   * Search param name and values should be encoded according to https://url.spec.whatwg.org/#urlencoded-serializing\r\n   * encodeURIComponent() produces the same result except encoding spaces as `%20` instead of `+`.\r\n   */\r\n  var serializeParam = function(value) {\r\n    return encodeURIComponent(value).replace(/%20/g, '+');\r\n  };\r\n\r\n  var deserializeParam = function(value) {\r\n    return decodeURIComponent(value).replace(/\\+/g, ' ');\r\n  };\r\n\r\n  var polyfillURLSearchParams = function() {\r\n\r\n    var URLSearchParams = function(searchString) {\r\n      Object.defineProperty(this, '_entries', { writable: true, value: {} });\r\n\r\n      if (typeof searchString === 'string') {\r\n        if (searchString !== '') {\r\n          this._fromString(searchString);\r\n        }\r\n      } else if (searchString instanceof URLSearchParams) {\r\n        var _this = this;\r\n        searchString.forEach(function(value, name) {\r\n          _this.append(name, value);\r\n        });\r\n      }\r\n    };\r\n\r\n    var proto = URLSearchParams.prototype;\r\n\r\n    proto.append = function(name, value) {\r\n      if (name in this._entries) {\r\n        this._entries[name].push(value.toString());\r\n      } else {\r\n        this._entries[name] = [value.toString()];\r\n      }\r\n    };\r\n\r\n    proto.delete = function(name) {\r\n      delete this._entries[name];\r\n    };\r\n\r\n    proto.get = function(name) {\r\n      return (name in this._entries) ? this._entries[name][0] : null;\r\n    };\r\n\r\n    proto.getAll = function(name) {\r\n      return (name in this._entries) ? this._entries[name].slice(0) : [];\r\n    };\r\n\r\n    proto.has = function(name) {\r\n      return (name in this._entries);\r\n    };\r\n\r\n    proto.set = function(name, value) {\r\n      this._entries[name] = [value.toString()];\r\n    };\r\n\r\n    proto.forEach = function(callback, thisArg) {\r\n      var entries;\r\n      for (var name in this._entries) {\r\n        if (this._entries.hasOwnProperty(name)) {\r\n          entries = this._entries[name];\r\n          for (var i = 0; i < entries.length; i++) {\r\n            callback.call(thisArg, entries[i], name, this);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    proto.keys = function() {\r\n      var items = [];\r\n      this.forEach(function(value, name) {\r\n        items.push(name);\r\n      });\r\n      return createIterator(items);\r\n    };\r\n\r\n    proto.values = function() {\r\n      var items = [];\r\n      this.forEach(function(value) {\r\n        items.push(value);\r\n      });\r\n      return createIterator(items);\r\n    };\r\n\r\n    proto.entries = function() {\r\n      var items = [];\r\n      this.forEach(function(value, name) {\r\n        items.push([name, value]);\r\n      });\r\n      return createIterator(items);\r\n    };\r\n\r\n    if (iteratorSupported) {\r\n      proto[Symbol.iterator] = proto.entries;\r\n    }\r\n\r\n    proto.toString = function() {\r\n      var searchArray = [];\r\n      this.forEach(function(value, name) {\r\n        searchArray.push(serializeParam(name) + '=' + serializeParam(value));\r\n      });\r\n      return searchArray.join('&');\r\n    };\r\n\r\n    Object.defineProperty(proto, '_fromString', {\r\n      enumerable: false,\r\n      configurable: false,\r\n      writable: false,\r\n      value: function(searchString) {\r\n        this._entries = {};\r\n        searchString = searchString.replace(/^\\?/, '');\r\n        var attributes = searchString.split('&');\r\n        var attribute;\r\n        for (var i = 0; i < attributes.length; i++) {\r\n          attribute = attributes[i].split('=');\r\n          this.append(\r\n            deserializeParam(attribute[0]),\r\n            (attribute.length > 1) ? deserializeParam(attribute[1]) : ''\r\n          );\r\n        }\r\n      }\r\n    });\r\n\r\n    global.URLSearchParams = URLSearchParams;\r\n  };\r\n\r\n  if (!('URLSearchParams' in global) || (new URLSearchParams('?a=1').toString() !== 'a=1')) {\r\n    polyfillURLSearchParams();\r\n  }\r\n\r\n  if (typeof URLSearchParams.prototype.sort !== 'function') {\r\n    URLSearchParams.prototype.sort = function() {\r\n      var _this = this;\r\n      var items = [];\r\n      this.forEach(function(value, name) {\r\n        items.push([name, value]);\r\n        if (!_this._entries) {\r\n          _this.delete(name);\r\n        }\r\n      });\r\n      items.sort(function(a, b) {\r\n        if (a[0] < b[0]) {\r\n          return -1;\r\n        } else if (a[0] > b[0]) {\r\n          return +1;\r\n        } else {\r\n          return 0;\r\n        }\r\n      });\r\n      if (_this._entries) { // force reset because IE keeps keys index\r\n        _this._entries = {};\r\n      }\r\n      for (var i = 0; i < items.length; i++) {\r\n        this.append(items[i][0], items[i][1]);\r\n      }\r\n    };\r\n  }\r\n\r\n  // HTMLAnchorElement\r\n\r\n})(\r\n  (typeof global !== 'undefined') ? global\r\n    : ((typeof window !== 'undefined') ? window\r\n    : ((typeof self !== 'undefined') ? self : this))\r\n);\r\n\r\n(function(global) {\r\n  /**\r\n   * Polyfill URL\r\n   *\r\n   * Inspired from : https://github.com/arv/DOM-URL-Polyfill/blob/master/src/url.js\r\n   */\r\n\r\n  var checkIfURLIsSupported = function() {\r\n    try {\r\n      var u = new URL('b', 'http://a');\r\n      u.pathname = 'c%20d';\r\n      return (u.href === 'http://a/c%20d') && u.searchParams;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n\r\n  var polyfillURL = function() {\r\n    var _URL = global.URL;\r\n\r\n    var URL = function(url, base) {\r\n      if (typeof url !== 'string') url = String(url);\r\n\r\n      // Only create another document if the base is different from current location.\r\n      var doc = document, baseElement;\r\n      if (base && (global.location === void 0 || base !== global.location.href)) {\r\n        doc = document.implementation.createHTMLDocument('');\r\n        baseElement = doc.createElement('base');\r\n        baseElement.href = base;\r\n        doc.head.appendChild(baseElement);\r\n        try {\r\n          if (baseElement.href.indexOf(base) !== 0) throw new Error(baseElement.href);\r\n        } catch (err) {\r\n          throw new Error('URL unable to set base ' + base + ' due to ' + err);\r\n        }\r\n      }\r\n\r\n      var anchorElement = doc.createElement('a');\r\n      anchorElement.href = url;\r\n      if (baseElement) {\r\n        doc.body.appendChild(anchorElement);\r\n        anchorElement.href = anchorElement.href; // force href to refresh\r\n      }\r\n\r\n      if (anchorElement.protocol === ':' || !/:/.test(anchorElement.href)) {\r\n        throw new TypeError('Invalid URL');\r\n      }\r\n\r\n      Object.defineProperty(this, '_anchorElement', {\r\n        value: anchorElement\r\n      });\r\n\r\n\r\n      // create a linked searchParams which reflect its changes on URL\r\n      var searchParams = new URLSearchParams(this.search);\r\n      var enableSearchUpdate = true;\r\n      var enableSearchParamsUpdate = true;\r\n      var _this = this;\r\n      ['append', 'delete', 'set'].forEach(function(methodName) {\r\n        var method = searchParams[methodName];\r\n        searchParams[methodName] = function() {\r\n          method.apply(searchParams, arguments);\r\n          if (enableSearchUpdate) {\r\n            enableSearchParamsUpdate = false;\r\n            _this.search = searchParams.toString();\r\n            enableSearchParamsUpdate = true;\r\n          }\r\n        };\r\n      });\r\n\r\n      Object.defineProperty(this, 'searchParams', {\r\n        value: searchParams,\r\n        enumerable: true\r\n      });\r\n\r\n      var search = void 0;\r\n      Object.defineProperty(this, '_updateSearchParams', {\r\n        enumerable: false,\r\n        configurable: false,\r\n        writable: false,\r\n        value: function() {\r\n          if (this.search !== search) {\r\n            search = this.search;\r\n            if (enableSearchParamsUpdate) {\r\n              enableSearchUpdate = false;\r\n              this.searchParams._fromString(this.search);\r\n              enableSearchUpdate = true;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    var proto = URL.prototype;\r\n\r\n    var linkURLWithAnchorAttribute = function(attributeName) {\r\n      Object.defineProperty(proto, attributeName, {\r\n        get: function() {\r\n          return this._anchorElement[attributeName];\r\n        },\r\n        set: function(value) {\r\n          this._anchorElement[attributeName] = value;\r\n        },\r\n        enumerable: true\r\n      });\r\n    };\r\n\r\n    ['hash', 'host', 'hostname', 'port', 'protocol']\r\n      .forEach(function(attributeName) {\r\n        linkURLWithAnchorAttribute(attributeName);\r\n      });\r\n\r\n    Object.defineProperty(proto, 'search', {\r\n      get: function() {\r\n        return this._anchorElement['search'];\r\n      },\r\n      set: function(value) {\r\n        this._anchorElement['search'] = value;\r\n        this._updateSearchParams();\r\n      },\r\n      enumerable: true\r\n    });\r\n\r\n    Object.defineProperties(proto, {\r\n\r\n      'toString': {\r\n        get: function() {\r\n          var _this = this;\r\n          return function() {\r\n            return _this.href;\r\n          };\r\n        }\r\n      },\r\n\r\n      'href': {\r\n        get: function() {\r\n          return this._anchorElement.href.replace(/\\?$/, '');\r\n        },\r\n        set: function(value) {\r\n          this._anchorElement.href = value;\r\n          this._updateSearchParams();\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'pathname': {\r\n        get: function() {\r\n          return this._anchorElement.pathname.replace(/(^\\/?)/, '/');\r\n        },\r\n        set: function(value) {\r\n          this._anchorElement.pathname = value;\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'origin': {\r\n        get: function() {\r\n          // get expected port from protocol\r\n          var expectedPort = { 'http:': 80, 'https:': 443, 'ftp:': 21 }[this._anchorElement.protocol];\r\n          // add port to origin if, expected port is different than actual port\r\n          // and it is not empty f.e http://foo:8080\r\n          // 8080 != 80 && 8080 != ''\r\n          var addPortToOrigin = this._anchorElement.port != expectedPort &&\r\n            this._anchorElement.port !== '';\r\n\r\n          return this._anchorElement.protocol +\r\n            '//' +\r\n            this._anchorElement.hostname +\r\n            (addPortToOrigin ? (':' + this._anchorElement.port) : '');\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'password': { // TODO\r\n        get: function() {\r\n          return '';\r\n        },\r\n        set: function(value) {\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'username': { // TODO\r\n        get: function() {\r\n          return '';\r\n        },\r\n        set: function(value) {\r\n        },\r\n        enumerable: true\r\n      },\r\n    });\r\n\r\n    URL.createObjectURL = function(blob) {\r\n      return _URL.createObjectURL.apply(_URL, arguments);\r\n    };\r\n\r\n    URL.revokeObjectURL = function(url) {\r\n      return _URL.revokeObjectURL.apply(_URL, arguments);\r\n    };\r\n\r\n    global.URL = URL;\r\n\r\n  };\r\n\r\n  if (!checkIfURLIsSupported()) {\r\n    polyfillURL();\r\n  }\r\n\r\n  if ((global.location !== void 0) && !('origin' in global.location)) {\r\n    var getOrigin = function() {\r\n      return global.location.protocol + '//' + global.location.hostname + (global.location.port ? (':' + global.location.port) : '');\r\n    };\r\n\r\n    try {\r\n      Object.defineProperty(global.location, 'origin', {\r\n        get: getOrigin,\r\n        enumerable: true\r\n      });\r\n    } catch (e) {\r\n      setInterval(function() {\r\n        global.location.origin = getOrigin();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n})(\r\n  (typeof global !== 'undefined') ? global\r\n    : ((typeof window !== 'undefined') ? window\r\n    : ((typeof self !== 'undefined') ? self : this))\r\n);\r\n","import 'url-polyfill';\n\nexport abstract class GenericAPIClient {\n\n  constructor(\n    private readonly baseURL: string = '',\n    private readonly fetchHandler: (url: string | Request, options?: RequestInit) => Promise<Response> = fetch,\n    private readonly clientConfig?: RequestInit,\n    protected readonly errorHandler?: (error: Response) => void\n  ) { }\n\n  private handleError(resp: Response) {\n    if (this.errorHandler) {\n      this.errorHandler(resp);\n    } else {\n      throw new ResponseException(ResponseErrors[resp.status].toString(), resp.status, resp);\n    }\n  }\n\n  public async request(url: string | Request, fetchConfig?: RequestInit, overrideDefaultConfig?: boolean): Promise<Response> {\n    let uri: string = typeof url === 'string' ? url : url.url\n    if (!uri.match(/^(\\w+:)?\\/\\//)) {\n      uri = new URL(this.baseURL, uri).href\n    }\n    try {\n      let response = await this.fetchHandler(new Request(uri, overrideDefaultConfig ? fetchConfig : { ...this.clientConfig, ...fetchConfig }));\n      if (!response.ok) {\n        this.handleError(response);\n      }\n      return response;\n    } catch (e) {\n      throw new ResponseException(e, -1);\n    }\n  }\n}\n\nexport class ResponseException extends Error {\n  constructor(\n    public message: string,\n    public status: ResponseErrors,\n    public data?: Response\n  ) {\n    super(message);\n    Object.setPrototypeOf(this, ResponseException.prototype);\n    this.name = 'ResponseExcpetion';\n    this.message = message;\n    this.data = data;\n  }\n\n  toString() {\n    return this.name + ': ' + this.message;\n  }\n}\n\nexport enum ResponseErrors {\n  BadRequest = 400,\n  Unauthorized = 401,\n  PaymentRequired = 402,\n  Forbidden = 403,\n  NotFound = 404,\n  MethodNotAllowed = 405,\n  NotAcceptable = 406,\n  ProxyAuthenticationRequired = 407,\n  RequestTimeout = 408,\n  Conflict = 409,\n  Gone = 410,\n  LengthRequired = 411,\n  InvalidMedia = 415,\n  Unprocessable = 422,\n  TooManyRequests = 429,\n  ServerError = 500,\n  NotImplemented = 500,\n  BadGateway = 502,\n  ServiceUnavailable = 503,\n  GatewayTimeout = 504,\n}\n","import { GenericAPIClient } from './client'\n\nexport default class KeFetchUpJsonClient extends GenericAPIClient {\n  public async request(url: string | Request, fetchConfig?: RequestInit, overrideDefaultConfig?: boolean): Promise<Response|any> {\n    return await (await super.request(url, fetchConfig, overrideDefaultConfig)).json()\n  }\n}\n"],"names":["global","this","tslib_1.__extends"],"mappings":"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"}